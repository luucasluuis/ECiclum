{% extends "global/base.html" %}
{% block content %}
<div class="container mt-5">
    <h2>Cadastrar Produto</h2>
    <form method="post" novalidate>
        {% csrf_token %}
        
        <!-- Produto Form -->
        <fieldset class="border p-4 mb-4">
            <legend class="w-auto">Informações do Produto</legend>
            {{ form.as_p }}
        </fieldset>

        <!-- Botões para abrir os modais -->
        <div class="form-group">
            <button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#modalFornecedor">
                Adicionar Fornecedor
            </button>
            <button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target="#modalCategoria">
                Adicionar Categoria
            </button>
            <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#modalLote">
                Adicionar Lote
            </button>
        </div>

        <!-- Botão de Envio do Produto -->
        <button type="submit" class="btn btn-primary">Salvar Produto</button>
        <a href="{% url 'home:produtos_list' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>

<!-- Modal para Adicionar Fornecedor -->
<div class="modal fade" id="modalFornecedor" tabindex="-1" role="dialog" aria-labelledby="modalFornecedorLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalFornecedorLabel">Adicionar Novo Fornecedor</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="formFornecedor">
                    {% csrf_token %}
                    {% for field in fornecedor_form %}
                        <div class="form-group">
                            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                            {{ field }}
                            {% if field.help_text %}
                                <small class="form-text text-muted">{{ field.help_text }}</small>
                            {% endif %}
                            {% for error in field.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        </div>
                    {% endfor %}
                    <button type="submit" class="btn btn-primary">Salvar Fornecedor</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal para Adicionar Categoria -->
<div class="modal fade" id="modalCategoria" tabindex="-1" role="dialog" aria-labelledby="modalCategoriaLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalCategoriaLabel">Adicionar Nova Categoria</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="formCategoria">
                    {% csrf_token %}
                    {% for field in categoria_form %}
                        <div class="form-group">
                            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                            {{ field }}
                            {% if field.help_text %}
                                <small class="form-text text-muted">{{ field.help_text }}</small>
                            {% endif %}
                            {% for error in field.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        </div>
                    {% endfor %}
                    <button type="submit" class="btn btn-primary">Salvar Categoria</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal para Adicionar Lote -->
<div class="modal fade" id="modalLote" tabindex="-1" role="dialog" aria-labelledby="modalLoteLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalLoteLabel">Adicionar Novo Lote</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="formLote">
                    {% csrf_token %}
                    {% for field in lote_form %}
                        <div class="form-group">
                            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                            {{ field }}
                            {% if field.help_text %}
                                <small class="form-text text-muted">{{ field.help_text }}</small>
                            {% endif %}
                            {% for error in field.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        </div>
                    {% endfor %}
                    <button type="submit" class="btn btn-primary">Salvar Lote</button>
                </form>
            </div>
        </div>
    </div>
</div>
    {% endblock %}